{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\n\nvar _this = this,\n    _jsxFileName = \"/home/mark/Desktop/gtau-fe-test/gtau-fe-test/gtau-fe-test/components/Listings.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useReducer } from \"react\";\nvar ACTIONS = [\"View\", \"Reply\"];\n\nvar formatAsCurrency = function formatAsCurrency(_int) {\n  // TODO\n  if (typeof _int === 'number') {\n    return '$' + _int.toLocaleString();\n  }\n\n  return _int;\n};\n\nvar Listing = function Listing(props) {\n  // TODO\n  // This should be the component which renders an individual listing to the page\n  var title = props.title,\n      description = props.description,\n      imgUrl = props.imgUrl,\n      location = props.location,\n      price = props.price;\n\n  var handleAction = function handleAction(action, title) {\n    console.log('action', action, title);\n  };\n\n  return __jsx(\"div\", {\n    className: \"listing\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"listing__title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 13\n    }\n  }, title), __jsx(\"div\", {\n    className: \"listing__subtitle\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"listing__price\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 17\n    }\n  }, formatAsCurrency(price)), __jsx(\"div\", {\n    className: \"listing__location\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 17\n    }\n  }, location)), description && __jsx(\"p\", {\n    className: \"listing__description\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 17\n    }\n  }, description), __jsx(\"footer\", {\n    className: \"listing__footer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }\n  }, ACTIONS.map(function (action) {\n    return __jsx(\"button\", {\n      key: action,\n      className: \"btn\",\n      onClick: function onClick() {\n        return handleAction(action, title);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 43\n      }\n    }, action);\n  })));\n};\n\n_c = Listing;\nvar INITIAL_STATE = {\n  loading: true,\n  error: '',\n  data: []\n};\n\nvar reducer = function reducer(state, action) {\n  switch (action.type) {\n    case 'SUCCESS':\n      return {\n        loading: false,\n        data: action.payload,\n        error: ''\n      };\n\n    case 'ERROR':\n      return {\n        loading: false,\n        data: [],\n        error: 'failed to fetch data'\n      };\n\n    default:\n      return state;\n  }\n};\n\nvar Listings = function Listings(props) {\n  _s();\n\n  // TODO\n  // This component should make a request to the api endpoint (props.dataEndpoint)\n  // then render the result as set of listings as per the design mocks\n  // check props passed in from parent for other values that you may need to use\n  var dataEndpoint = props.dataEndpoint,\n      keyword = props.keyword,\n      location = props.location;\n\n  var _useReducer = useReducer(reducer, INITIAL_STATE),\n      state = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  useEffect(function () {\n    fetch(dataEndpoint).then(function (response) {\n      if (response.status !== 200) {\n        dispatch({\n          type: 'ERROR'\n        });\n        return;\n      }\n\n      response.json().then(function (data) {\n        dispatch({\n          type: 'SUCCESS',\n          payload: data\n        });\n      });\n    })[\"catch\"](function (error) {\n      dispatch({\n        type: 'ERROR'\n      });\n    });\n  }, []);\n  var loading = state.loading,\n      data = state.data,\n      error = state.error;\n  return __jsx(\"div\", {\n    className: \"listings\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"listings__header\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, __jsx(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, \"Search Results\"), !loading && __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  }, __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 25\n    }\n  }, data.length, \" results\"), \" for \", __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 64\n    }\n  }, keyword), \" in \", __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 90\n    }\n  }, location))), __jsx(\"hr\", {\n    className: \"listings__rule\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    className: \"listings__grid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, data.length > 0 && data.map(function (item, index) {\n    return __jsx(Listing, _extends({\n      key: index\n    }, item, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 50\n      }\n    }));\n  })));\n};\n\n_s(Listings, \"zpn/kx5Q6O+5t2dWmjRtda+kHzA=\");\n\n_c2 = Listings;\nexport default Listings;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Listing\");\n$RefreshReg$(_c2, \"Listings\");","map":{"version":3,"sources":["/home/mark/Desktop/gtau-fe-test/gtau-fe-test/gtau-fe-test/components/Listings.js"],"names":["React","useEffect","useReducer","ACTIONS","formatAsCurrency","int","toLocaleString","Listing","props","title","description","imgUrl","location","price","handleAction","action","console","log","map","INITIAL_STATE","loading","error","data","reducer","state","type","payload","Listings","dataEndpoint","keyword","dispatch","fetch","then","response","status","json","length","item","index"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,UAA3B,QAA6C,OAA7C;AAEA,IAAMC,OAAO,GAAG,CAAC,MAAD,EAAS,OAAT,CAAhB;;AAEA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,IAAD,EAAS;AAC9B;AACA,MAAI,OAAOA,IAAP,KAAe,QAAnB,EAA6B;AACzB,WAAO,MAAMA,IAAG,CAACC,cAAJ,EAAb;AACH;;AACD,SAAOD,IAAP;AACH,CAND;;AAQA,IAAME,OAAO,GAAG,SAAVA,OAAU,CAACC,KAAD,EAAW;AACvB;AACA;AAFuB,MAGfC,KAHe,GAGiCD,KAHjC,CAGfC,KAHe;AAAA,MAGRC,WAHQ,GAGiCF,KAHjC,CAGRE,WAHQ;AAAA,MAGKC,MAHL,GAGiCH,KAHjC,CAGKG,MAHL;AAAA,MAGaC,QAHb,GAGiCJ,KAHjC,CAGaI,QAHb;AAAA,MAGuBC,KAHvB,GAGiCL,KAHjC,CAGuBK,KAHvB;;AAKvB,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,MAAD,EAASN,KAAT,EAAmB;AACpCO,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBF,MAAtB,EAA8BN,KAA9B;AACH,GAFD;;AAIA,SACI;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEI;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAiCA,KAAjC,CAFJ,EAII;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAiCL,gBAAgB,CAACS,KAAD,CAAjD,CADJ,EAEI;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAoCD,QAApC,CAFJ,CAJJ,EAmBMF,WAAW,IACT;AAAG,IAAA,SAAS,EAAC,sBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACMA,WADN,CApBR,EAwBI;AAAQ,IAAA,SAAS,EAAC,iBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEQP,OAAO,CAACe,GAAR,CAAY,UAAAH,MAAM;AAAA,WAAI;AAAQ,MAAA,GAAG,EAAEA,MAAb;AAAqB,MAAA,SAAS,EAAC,KAA/B;AAAqC,MAAA,OAAO,EAAE;AAAA,eAAMD,YAAY,CAACC,MAAD,EAASN,KAAT,CAAlB;AAAA,OAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAkFM,MAAlF,CAAJ;AAAA,GAAlB,CAFR,CAxBJ,CADJ;AAgCH,CAzCD;;KAAMR,O;AA2CN,IAAMY,aAAa,GAAG;AAClBC,EAAAA,OAAO,EAAE,IADS;AAElBC,EAAAA,KAAK,EAAE,EAFW;AAGlBC,EAAAA,IAAI,EAAE;AAHY,CAAtB;;AAMA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,KAAD,EAAQT,MAAR,EAAmB;AAC/B,UAAQA,MAAM,CAACU,IAAf;AACI,SAAK,SAAL;AACI,aAAO;AACHL,QAAAA,OAAO,EAAE,KADN;AAEHE,QAAAA,IAAI,EAAEP,MAAM,CAACW,OAFV;AAGHL,QAAAA,KAAK,EAAE;AAHJ,OAAP;;AAKJ,SAAK,OAAL;AACI,aAAO;AACHD,QAAAA,OAAO,EAAE,KADN;AAEHE,QAAAA,IAAI,EAAE,EAFH;AAGHD,QAAAA,KAAK,EAAE;AAHJ,OAAP;;AAKJ;AACI,aAAOG,KAAP;AAdR;AAgBH,CAjBD;;AAmBA,IAAMG,QAAQ,GAAG,SAAXA,QAAW,CAACnB,KAAD,EAAW;AAAA;;AACxB;AACA;AACA;AACA;AAJwB,MAKhBoB,YALgB,GAKoBpB,KALpB,CAKhBoB,YALgB;AAAA,MAKFC,OALE,GAKoBrB,KALpB,CAKFqB,OALE;AAAA,MAKOjB,QALP,GAKoBJ,KALpB,CAKOI,QALP;;AAAA,oBAMEV,UAAU,CAACqB,OAAD,EAAUJ,aAAV,CANZ;AAAA,MAMjBK,KANiB;AAAA,MAMVM,QANU;;AAOxB7B,EAAAA,SAAS,CAAC,YAAM;AACZ8B,IAAAA,KAAK,CAACH,YAAD,CAAL,CACKI,IADL,CACU,UAAAC,QAAQ,EAAI;AACd,UAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AACzBJ,QAAAA,QAAQ,CAAC;AAAEL,UAAAA,IAAI,EAAE;AAAR,SAAD,CAAR;AACA;AACH;;AACDQ,MAAAA,QAAQ,CAACE,IAAT,GAAgBH,IAAhB,CAAqB,UAACV,IAAD,EAAU;AAC3BQ,QAAAA,QAAQ,CAAC;AAAEL,UAAAA,IAAI,EAAE,SAAR;AAAmBC,UAAAA,OAAO,EAAEJ;AAA5B,SAAD,CAAR;AACH,OAFD;AAGH,KATL,WAUW,UAAAD,KAAK,EAAI;AACZS,MAAAA,QAAQ,CAAC;AAAEL,QAAAA,IAAI,EAAE;AAAR,OAAD,CAAR;AACH,KAZL;AAaH,GAdQ,EAcN,EAdM,CAAT;AAPwB,MAsBhBL,OAtBgB,GAsBSI,KAtBT,CAsBhBJ,OAtBgB;AAAA,MAsBPE,IAtBO,GAsBSE,KAtBT,CAsBPF,IAtBO;AAAA,MAsBDD,KAtBC,GAsBSG,KAtBT,CAsBDH,KAtBC;AAuBxB,SACI;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,EAGQ,CAACD,OAAD,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAOE,IAAI,CAACc,MAAZ,aADJ,WAC2C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAOP,OAAP,CAD3C,UACqE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAOjB,QAAP,CADrE,CAJR,CADJ,EAUI;AAAI,IAAA,SAAS,EAAC,gBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVJ,EAWI;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAESU,IAAI,CAACc,MAAL,GAAc,CAAf,IACId,IAAI,CAACJ,GAAL,CAAS,UAACmB,IAAD,EAAOC,KAAP;AAAA,WAAgB,MAAC,OAAD;AAAS,MAAA,GAAG,EAAEA;AAAd,OAA0BD,IAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAhB;AAAA,GAAT,CAHZ,CAXJ,CADJ;AAoBH,CA3CD;;GAAMV,Q;;MAAAA,Q;AA6CN,eAAeA,QAAf","sourcesContent":["import React, { useEffect, useReducer } from \"react\";\n\nconst ACTIONS = [\"View\", \"Reply\"];\n\nconst formatAsCurrency = (int) => {\n    // TODO\n    if (typeof int === 'number') {\n        return '$' + int.toLocaleString();\n    }\n    return int;\n};\n\nconst Listing = (props) => {\n    // TODO\n    // This should be the component which renders an individual listing to the page\n    const { title, description, imgUrl, location, price } = props;\n\n    const handleAction = (action, title) => {\n        console.log('action', action, title)\n    }\n\n    return (\n        <div className=\"listing\">\n\n            <div className=\"listing__title\">{title}</div>\n\n            <div className=\"listing__subtitle\">\n                <div className=\"listing__price\">{formatAsCurrency(price)}</div>\n                <div className=\"listing__location\">{location}</div>\n            </div>\n\n            {\n                /*\n                imgUrl &&\n                <div className=\"listing__img-wrap\">\n                    <img alt={title} src={imgUrl} className=\"listing__img\"/>\n                </div>\n                */\n\n            }\n\n            { description &&\n                <p className=\"listing__description\">\n                    { description }\n                </p>\n            }\n            <footer className=\"listing__footer\">\n                {\n                    ACTIONS.map(action => <button key={action} className=\"btn\" onClick={() => handleAction(action, title)}>{action}</button>)\n                }\n            </footer>\n        </div>\n    );\n};\n\nconst INITIAL_STATE = {\n    loading: true,\n    error: '',\n    data: [],\n}\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case 'SUCCESS':\n            return {\n                loading: false,\n                data: action.payload,\n                error: ''\n            }\n        case 'ERROR':\n            return {\n                loading: false,\n                data: [],\n                error: 'failed to fetch data'\n            }\n        default:\n            return state;\n    }\n}\n\nconst Listings = (props) => {\n    // TODO\n    // This component should make a request to the api endpoint (props.dataEndpoint)\n    // then render the result as set of listings as per the design mocks\n    // check props passed in from parent for other values that you may need to use\n    const { dataEndpoint, keyword, location } = props;\n    const [state, dispatch] = useReducer(reducer, INITIAL_STATE)\n    useEffect(() => {\n        fetch(dataEndpoint)\n            .then(response => {\n                if (response.status !== 200) {\n                    dispatch({ type: 'ERROR'})\n                    return;\n                }\n                response.json().then((data) => {\n                    dispatch({ type: 'SUCCESS', payload: data});\n                });\n            })\n            .catch(error => {\n                dispatch({ type: 'ERROR'})\n            })\n    }, []);\n    const { loading, data, error } = state;\n    return (\n        <div className=\"listings\">\n            <div className=\"listings__header\">\n                <h2>Search Results</h2>\n                {\n                    !loading &&\n                    <p>\n                        <span>{data.length} results</span> for <span>{keyword}</span> in <span>{location}</span>\n                    </p>\n                }\n            </div>\n            <hr className=\"listings__rule\" />\n            <div className=\"listings__grid\">\n                {\n                    (data.length > 0) &&\n                        data.map((item, index) =><Listing key={index }{ ...item } />)\n                }\n            </div>\n        </div>\n    );\n};\n\nexport default Listings;\n"]},"metadata":{},"sourceType":"module"}